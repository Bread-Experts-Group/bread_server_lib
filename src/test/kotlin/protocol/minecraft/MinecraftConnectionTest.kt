package org.bread_experts_group.protocol.old.minecraft

import org.bread_experts_group.buildDate
import org.bread_experts_group.logging.ColoredHandler
import org.bread_experts_group.protocol.old.minecraft.packet.status.MinecraftStatusResponsePacket
import org.bread_experts_group.protocol.old.minecraft.server.MinecraftStandardServer
import org.bread_experts_group.version
import org.junit.jupiter.api.Test
import org.junit.jupiter.api.assertDoesNotThrow
import java.net.InetSocketAddress
import java.nio.channels.ServerSocketChannel

class MinecraftConnectionTest {
	val logger = ColoredHandler.newLogger("tmp")

	@Test
	fun test() = assertDoesNotThrow {
		val socket = ServerSocketChannel.open()
		socket.bind(InetSocketAddress("0.0.0.0", 25565))
		logger.info("Socket on ${socket.localAddress}")
		val server = MinecraftStandardServer(
			MinecraftStatusResponsePacket(
				"Bread Server Library ${version()} @ ${buildDate()} for 1.12.2",
				340,
				playersMax = Int.MAX_VALUE,
				playersOnline = Int.MAX_VALUE - 1,
				description = "\\u00a7l   \\u00a76                  BSL\\u00a7r \\u00a7l\\u00a7fmain server\\u00a7r\\n                      \\u00a7c\\u2620 (do not join) \\u2620",
				favicon = "data:image/png;base64,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"
			)
		)
		while (true) {
			val client = socket.accept()
			logger.info("Received ${client.remoteAddress}")
			server.handle(client)
		}
	}
}